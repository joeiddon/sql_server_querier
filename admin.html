<html>
<head>
<style>
body {
    background-color: #000;
    color: #fff;
}
#initial_front_div {

}
#main_div {
  display: none;
  max-width: 100%;
}
pre {
  white-space: pre-wrap;
}
</style>
</head>
<body>

<div id='initial_front_div'>
  <h1>Admin</h1>
  <p style='background-color:#fff;color:#000;'>Try hack me; I dare you.</p>
  <input id='pass' type='password' placeholder='password' autofocus></input>
  <input id='go' type='button' value='login'></input>
  <div id='status'></div>
</div>

<div id='main_div'>
  <h1>Overview</h1>
  <div id='last_login'></div>
  <pre id='transmissions'></pre>
</div>

<script>
'use strict';

let pass = document.getElementById('pass');
let go_but = document.getElementById('go');
let status_div = document.getElementById('status');
let last_login_div = document.getElementById('last_login');
let transmissions_pre = document.getElementById('transmissions');
let initial_front_div = document.getElementById('initial_front_div');
let main_div = document.getElementById('main_div');

go_but.onclick = function(){
    let xhr = new XMLHttpRequest();
    xhr.open('POST', 'https://joe.iddon.com')
    xhr.send(JSON.stringify({'type':'get_log','pass':pass.value}));
    xhr.onload = function(){
        let response = JSON.parse(xhr.response);
        status_div.innerText = response['status'];
        if (response['status'] == 'pass'){
            login(response);
        }
    }
}

function login(response){
    initial_front_div.style.display = 'none';
    main_div.style.display = 'block';
    transmissions_pre.innerText = response['log'];
    document.body.scrollTop = document.body.scrollHeight;
    last_login_div.innerText = 'last login: '+response['last_login_time'];
}
</script>
</body>
</html>
